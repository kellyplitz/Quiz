function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function startQuiz(){$("#header__menu").delay(400).fadeIn(),$("#welcome").fadeOut("fast"),$("#quiz-form-wrapper").delay(400).fadeIn(),setQuiz($("#header__menu li .active"))}function createCookies(){var e="user="+encodeURIComponent($("#welcome input").val());document.cookie=e,loadCookies()}function loadCookies(){for(var e=document.cookie.split("; "),s=e.length-1;s>=0;s--){var i=e[s].split("=");cookies[i[0]]=i[1]}}function setQuiz(e){$(e).parent().parent().find("li").removeClass("active"),$(e).parent().addClass("active"),activeQuizName=$("#header__menu .active").text().toLowerCase();var s=null;user.progress.forEach(function(e){e.name==activeQuizName&&(s=user.progress.indexOf(e))}),null==s?(activeQuizObject=new Quiz(activeQuizName),user.progress.push({name:activeQuizName,answers:{},score:0,object:activeQuizObject}),activeQuizObject.loadQuiz()):(user.progress.forEach(function(e){e.name==activeQuizName&&(activeQuizObject=e.object)}),activeQuizObject.loadQuiz()),activeQuizObject.disableToFinish()}var _createClass=function(){function e(e,s){for(var i=0;i<s.length;i++){var t=s[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(s,i,t){return i&&e(s.prototype,i),t&&e(s,t),s}}(),cookies={},user=null,activeQuizName=null;$(document).ready(function(){$("#quiz-wrapper").fadeIn(),$.getJSON("../assets/data.json"),loadCookies(),null!=cookies.user&&($("#welcome p").html("Welcome back "+cookies.user+"!"),$("#welcome input").hide()),$("#welcome button").click(function(){null!=cookies.user?(user=new User(cookies.user),startQuiz()):$("#welcome input").val().length>=2&&(user=new User(cookies.user),startQuiz(),createCookies())})});var User=function(){function e(s){_classCallCheck(this,e),this.name=s,this.progress=[]}return _createClass(e,[{key:"registerAnswerSelection",value:function(e){this.progress.forEach(function(s){s.name==activeQuizName&&(s.answers[e]=$("input:checked").val())})}},{key:"countScore",value:function(){var e=0;this.progress.forEach(function(s){if(s.name==activeQuizName)for(var i=0;i<s.object.numOfQuestions;i++)s.answers[i]==s.object.dataName[i].correct&&e++}),activeQuizObject.showScore(e)}}]),e}(),Quiz=function(){function Quiz(dataName){_classCallCheck(this,Quiz),this.dataName=eval(dataName),this.numOfQuestions=this.dataName.length,this.currentQuestion=0,this.quizWrapper=$("#quiz-form-wrapper"),this.progressBar=$("#quiz-form__progress-bar"),this.question=$("#quiz-form__question"),this.answers=$(".quiz-form__answer"),this.radios=$('#quiz-form input[type="radio"]'),this.controls=$("#quiz-form__buttons"),this.score=$("#score-wrapper")}return _createClass(Quiz,[{key:"renderProgressBar",value:function(){this.currentQuestion+1<=this.numOfQuestions&&(this.progressBar.attr("aria-valuemax",this.numOfQuestions),this.progressBar.animate({width:(this.currentQuestion+1)/this.numOfQuestions*100+"%"},400).attr("aria-valuenow",this.currentQuestion+1),this.progressBar.text(this.currentQuestion+1+" z "+this.numOfQuestions)),this.currentQuestion+1==this.numOfQuestions}},{key:"loadQuiz",value:function(){this.deselectQuestion(),this.renderProgressBar(),this.showQuiz(),indexOfActiveQuiz=0,user.progress.forEach(function(e){e.name==activeQuizName&&(indexOfActiveQuiz=user.progress.indexOf(e))}),this.question.text(this.dataName[this.currentQuestion].question);for(var e in this.dataName[this.currentQuestion].choices)this.answers.find("span").eq(e).text(this.dataName[this.currentQuestion].choices[e]);this.currentQuestion>0&!(this.currentQuestion==this.numOfQuestions)?this.controls.find(".btn-back").fadeIn():this.controls.find(".btn-back").fadeOut();var s=user.progress[indexOfActiveQuiz].answers[this.currentQuestion];s?(this.radios[s-1].checked=!0,this.enableButton(),this.enableToFinish()):activeQuizObject.disableToFinish()}},{key:"prevQuestion",value:function(){this.currentQuestion--,this.loadQuiz(),this.disableToFinish(),this.progressBar.removeClass("success")}},{key:"nextQuestion",value:function(){for(var e in this.radios)if(this.radios[e].checked){this.currentQuestion++,this.loadQuiz();break}}},{key:"enableButton",value:function(){this.controls.find(".btn-next").removeClass("disabled","linear")}},{key:"disableButton",value:function(){this.controls.find(".btn-next").addClass("disabled","linear")}},{key:"selectQuestion",value:function(){user.registerAnswerSelection(this.currentQuestion),this.answers.find("span").removeClass("selected"),this.radios.find(":checked").parent().find("span").addClass("selected"),this.enableButton(),this.enableToFinish()}},{key:"deselectQuestion",value:function(){for(i in this.radios)this.radios[i].checked=!1;this.answers.find("span").removeClass("selected"),this.disableButton()}},{key:"showScore",value:function(e){this.quizWrapper.fadeOut(),this.score.delay(400).fadeIn(),e>=Math.floor(80*activeQuizObject.numOfQuestions/100)?(this.score.find("p").html("Are you god, "+user.name+"? <br>Your score is "+e+"!"),this.score.find("img").fadeIn()):(this.score.find("p").html("OMG "+user.name+"! <br>Your score is only "+e+"..."),this.score.find("img").fadeOut())}},{key:"restartQuiz",value:function(){this.currentQuestion=0,user.progress=[],startQuiz()}},{key:"showQuiz",value:function(){this.score.is(":visible")&&(this.score.fadeOut(),this.quizWrapper.delay(400).fadeIn())}},{key:"enableToFinish",value:function(){this.currentQuestion+1==this.numOfQuestions&&(this.controls.find(".btn-next").fadeOut(),this.controls.find(".btn-finish").fadeIn(),this.progressBar.addClass("success","linear"))}},{key:"disableToFinish",value:function(){this.currentQuestion+1!=this.numOfQuestions&&(this.controls.find(".btn-next").fadeIn(),this.controls.find(".btn-finish").fadeOut(),this.progressBar.removeClass("success","linear"))}}]),Quiz}();